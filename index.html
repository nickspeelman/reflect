<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ‚úÖ Basic Metadata -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reflect</title>

  <!-- üé® Styles and Icons -->
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="icon" type="image/png" sizes="32x32" href="web-app-manifest-192x192.png" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#000000" />
  <script src="https://unpkg.com/idb@7/build/umd.js"></script>

  <!-- ‚úÖ Canonical & basic SEO -->
<title>Reflect ‚Äî Free, AI-Assisted, Private Journaling App (Offline & Local-First)</title>
<link rel="canonical" href="https://thirtybirds.rest/reflect" />
<meta name="description" content="Reflect is a free, AI-assisted journaling app that runs entirely offline in your browser. Private, local-first, and powered by small on-device language models for mindful reflection." />
<meta name="keywords" content="free AI journaling app, AI assisted journaling, AI augmented writing, offline journal, private journaling app, local-first, mindful journaling, privacy-first journal" />
<meta name="robots" content="index, follow" />

<!-- üü¶ Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Thirty Birds" />
<meta property="og:title" content="Reflect ‚Äî Free, AI-Assisted, Private Journaling App" />
<meta property="og:description" content="A free, local-first space for reflective writing ‚Äî private, offline, and gently AI-augmented." />
<meta property="og:url" content="https://thirtybirds.rest/reflect" />
<meta property="og:image" content="./reflect.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:alt" content="Reflect ‚Äî a free, AI-assisted journaling app that runs offline" />

<!-- üê¶ Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Reflect ‚Äî Free, AI-Assisted, Private Journaling App" />
<meta name="twitter:description" content="A free, local-first journaling space that uses small AI models for mindful reflection ‚Äî your data never leaves your device." />
<meta name="twitter:image" content="./reflect.png" />

<!-- üì± PWA / Apple -->
<link rel="apple-touch-icon" href="/assets/ios-touch-icon.png" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="mobile-web-app-capable" content="yes" />

<!-- üåê Language & author -->
<meta name="author" content="Nick Speelman" />
<meta http-equiv="Content-Language" content="en" />

<!-- üß† Structured Data (SoftwareApplication) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "Reflect",
  "applicationCategory": "ProductivityApplication",
  "operatingSystem": "Web",
  "url": "https://thirtybirds.rest/reflect",
  "image": "./reflect.png",
  "description": "Reflect is a free, AI-assisted journaling app that runs entirely offline in your browser. Local-first and privacy-focused, it uses small on-device language models to help you reflect without compromising your data.",
  "sameAs": ["https://thirtybirds.rest"],
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "privacyPolicy": "https://thirtybirds.rest/privacy",
  "isAccessibleForFree": true,
  "featureList": [
    "Offline, private journaling",
    "AI-assisted reflection using on-device models",
    "Free and open access",
    "No accounts, no cloud storage"
  ]
}
</script>


</head>

<body>
  <div class="container">
    <!-- Modal portal lives outside .container -->
<div id="modal-root" class="app-scope"></div>

    <!-- üß† App Title -->
               <div>
        <a id="reopenWelcome" class="modal-link">Help / Welcome</a><br>
        <!-- Add a top link/button to open the modal -->
    <a href="#" id="openBackupModalLink" class="toplink">Backup / Restore</a>
    <h1>Reflect</h1>


        <!-- üí¨ Prompt Display Section -->
    <div class="prompt-section">
           <div id="promptContainer" class="prompt-container">
        <div id="prompt" class="prompt-text"></div>
        <button id="newPrompt" class="refresh-button" title="Get new prompt" aria-label="Get new prompt">
          <img src="assets/refresh_icon.svg" alt="Refresh" width="18" height="18" />
        </button>
      </div>
    </div>


    <!-- ‚úçÔ∏è Journal Entry Form -->
    <div class="entry-section">
      <textarea 
        id="journalEntry" 
        maxlength="2000" 
        placeholder="Write your response here..."
      ></textarea>
      <div id="charCount">2000 characters remaining</div>
      <button id="submitEntry">Submit Entry</button>

    </div>

        <!-- üï∞Ô∏è Past Entries Section -->
      <div class="past-entries">
        <h2 id="entrySectionTitle">Recent Entries</h2>
        <ul id="entryList"></ul>
        <a id="viewAllEntries" class="modal-link">View all past entries</a>
      </div>
  </div>

<template id="entryModalTemplate">
  <div class="modalOverlay hidden">
    <div class="modalBox entry-modal-box">
      <button class="close-button">&times;</button>
      <div id="modalContent" class="modalContent">
        <div id="modalDate" class="modal-date"></div>
        <div id="modalPrompt" class="modal-prompt"></div>
        <div id="modalResponse" class="modal-response"></div>
        <div id="relatedEntries" class="related-entries"></div>
      </div>
    </div>
  </div>
</template>





  <!-- üîç Modal: View a Specific Entry -->
  <div id="entryModal" class="modalOverlay hidden">
    <div class="modalBox entry-modal-box">
      <button class="close-button close-button--entry" id="closeModal" aria-label="Close modal">&times;</button>

      <div id="modalContent"  class="modalContent">
        <div id="modalDate" class="modal-date"></div>
        <div id="modalPrompt" class="modal-prompt"></div>
        <div id="modalResponse" class="modal-response"></div>
        <div id="relatedEntries" class="related-entries"></div>
      </div>
    </div>
  </div>

  <!-- ‚úçÔ∏è Modal: Processing Indicator -->
  <div id="processingSplash" class="modalOverlay hidden">
    <div class="modalBox">
      <p style="font-size: 1.3em;">‚úçÔ∏è Reflecting on your entry...</p>
    </div>
  </div>

  <!-- üìú Modal: All Past Entries -->
  <div id="allEntriesModal" class="modalOverlay hidden">
    <div class="modalBox">
      <button class="close-button" id="closeAllEntries">&times;</button>
      <h2 id="allEntriesTitle">Past Entries</h2>
      <div id="entrySearchSection">
         <input type="text" id="entrySearchInput" placeholder="Search..." />

        <div id="entrySearchMode">
          <label><input type="radio" name="entrySearchMode" value="text"> Text Search</label>
          <label><input type="radio" name="entrySearchMode" value="semantic"> Semantic Search</label>
         
        </div>
         <div class="search-button-row">
           <button id="entrySearchButton">Search</button>
           <button id="clearSearchButton">Clear Search</button>
          </div>
      </div>

      <ul id="allEntriesList"></ul>
    </div>
  </div>

  <!-- üëã Modal: Welcome Message -->
  <div id="welcomeModal" class="modalOverlay hidden">
    <div class="modalBox">
      <h2>Welcome to Reflect</h2>
      <p>This app is a private space for journaling and reflection. Everything runs locally ‚Äî your entries never leave your device.</p>

      <h3>How it works:</h3>
      <ul>
        <li>You'll receive a journaling prompt. You can click the "refresh" button to receive a new one if you'd like.</li>
        <li>Write your thoughts and submit them.</li>
        <li>The app summarizes and tags your entry using local AI.</li>
        <li>You‚Äôll see past entries that might relate to your current one.</li>
      </ul>

      <p>You can view all your past entries at any time, and everything is saved only in your browser.</p>

      <p>This application runs entirely in your browser so I can't sell your data because I never see your data. I also don't use any cookies. Which means this app is completely private and always will be.</p>

      <p>This application is and always will be completley free. How do I make money? I don't.  I believe in a world where the powerful want to grind you down, caring for yourself and your community is an act of resistance. If you want to support this project you may do so at <a href="https://thirtybirds.rest/donate" target="_blank">https://thirtybirds.rest/donate</a> </p>

      <p>If you have any feedback or just want to say "hi" you can email me at <a href="mailto:nick@thirtybirds.reset">nick@thirtybirds.rest</a></p>

      <p>
        If you want to see more of the growing suite tools I'm building, you can do so at <a href="https://thirtybirds.rest" target="_blank">https://thirtybirds.rest</a>
      </p>

      <button id="dismissWelcome">Get Started</button>
    </div>
  </div>

  <!-- üîé Modal: Relevant Entries -->
<div id="relevantEntriesModal" class="modalOverlay hidden">
  <div class="modalBox">
    <button class="close-button" id="closeRelevantEntries">&times;</button>
    <h2>Similar Entries</h2>
    <div id="relevanceFilterOptions">
      <label><input type="radio" name="relevanceFilter" value="recent"> Show me more recent relevant entries</label><br>
      <label><input type="radio" name="relevanceFilter" value="older"> Show me older relevant entries</label><br>
      <label><input type="radio" name="relevanceFilter" value="most"> Show me the most relevant entries</label>
    </div>

    <ul id="relevantEntriesList"></ul>
    <div id="followUpEntrySection">
      <h3>Do you have anything to add?</h3>
      <textarea id="followUpEntry" maxlength="2000" placeholder="Add more thoughts..."></textarea>
      <div id="followUpCharCount">2000 characters remaining</div>
      <button id="submitFollowUpEntry" class="secondary-button">Submit Follow-Up</button>
    </div>
  </div>
</div>
</div>



<!-- ‚Ä¶later in the file (near other modals) -->
<div id="backupModal" class="modalOverlay hidden" aria-hidden="true">
  <div class="modalBox">
    <button id="closeBackupModalBtn" class="close-button" aria-label="Close">√ó</button>
    <h2>Backup &amp; Restore</h2>

    <!-- We‚Äôll add the longer safety copy + restore UI in later steps -->
    <p class="muted">Create a local backup of your journal data as a JSON file.</p>

    <p class="muted">
      Backups are saved as files on your device. Clearing your browser data or reinstalling may erase your journal.
      Saving a backup file ensures you can restore your entries later.
    </p>

  <div class="modal-actions" style="margin-top: .75rem;">
      <label for="restoreFileInput" class="secondary-button" role="button" tabindex="0">
    Restore from backup‚Ä¶
  </label>
    <input id="restoreFileInput" type="file" accept="application/json,.json" class="visually-hidden" />
  </div>
  

    <div class="modal-actions" style="margin-top: 1rem;">
      <button id="backupNowBtn" class="secondary-button">Backup now</button>
      <button id="closeBackupModalBtn2" class="secondary-button">Close</button>
    </div>

    <hr class="divider" />

    <div class="backup-status" style="margin-top:.5rem">
      <p><strong>Unbacked entries:</strong> <span id="unbackedCount">0</span></p>
      <p><strong>Last backup:</strong> <span id="lastBackupLabel">Never</span></p>
    </div>

    <label for="backupThresholdInput" class="label" style="display:block;margin-top:.75rem;">
      Remind me every N new entries (0 = never):
    </label>
    <input id="backupThresholdInput" type="number" min="0" step="1" value="10" style="max-width:10ch;">

  </div>
</div>



<script type="module">
  import * as transformers from 'https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2';
  window.transformers = transformers;
  const { env } = transformers;

  env.allowLocalModels = true;
  env.localModelPath = '/models';
  env.useCDN = false;     // force local lookups
  env.useBrowserCache = true;
</script>


<script type="module" src="js/app.js"></script>






</body>
</html>
